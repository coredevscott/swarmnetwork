import{jsx as _jsx,jsxs as _jsxs}from"react/jsx-runtime";import*as React from"react";import{addPropertyControls,ControlType}from"framer";/*
  A simple Flicker Hook:
  If flicker is on, it randomizes opacity ~10 times/sec.
*/function useFlicker(enabled){const[opacity,setOpacity]=React.useState(1);React.useEffect(()=>{if(!enabled)return;const interval=setInterval(()=>{setOpacity(Math.random()*.3+.7);},100);return()=>clearInterval(interval);},[enabled]);return enabled?opacity:1;}/**
 * HorizontalNoBorderSubscription
 *
 * Now connected to a Google Apps Script endpoint (scriptUrl).
 * When user clicks SUBSCRIBE, we POST {email} to that URL.
 * If the script is set up to store in a Google Sheet, the email gets stored.
 */export function HorizontalNoBorderSubscription(props){const{heading,placeholder,flickerEnabled,fontName,fontSize,scriptUrl}=props;const[email,setEmail]=React.useState("");const[loading,setLoading]=React.useState(false);const[message,setMessage]=React.useState("");// Flicker effect for entire container
const flickerOpacity=useFlicker(flickerEnabled);async function handleSubscribe(){setLoading(true);setMessage("");try{if(!email){throw new Error("Please enter an email.");}if(!scriptUrl){throw new Error("Missing Google Apps Script URL.");}// POST to the Apps Script endpoint with JSON:
const res=await fetch(scriptUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email})});if(!res.ok){// Attempt to read the error text
const errText=await res.text();throw new Error(`HTTP ${res.status}: ${errText}`);}const data=await res.json();if(!data.success){throw new Error(data.error||"Unknown error from script");}// If success:
setMessage("Thank you! Your email was recorded.");}catch(err){setMessage(`Error: ${err.message}`);}setLoading(false);}return /*#__PURE__*/_jsxs("div",{style:{...styles.container,fontFamily:fontName,fontSize:`${fontSize}px`,opacity:flickerOpacity},children:[/*#__PURE__*/_jsxs("div",{style:styles.row,children:[/*#__PURE__*/_jsx("div",{style:styles.heading,children:heading}),/*#__PURE__*/_jsx("input",{type:"email",placeholder:placeholder,value:email,onChange:e=>setEmail(e.target.value),style:{...styles.emailInput,fontFamily:fontName,fontSize:`${fontSize-2}px`}}),/*#__PURE__*/_jsx("button",{disabled:loading,onClick:handleSubscribe,style:{...styles.subscribeButton,fontFamily:fontName,fontSize:`${fontSize-2}px`},children:loading?"Loading...":"SUBSCRIBE"})]}),message&&/*#__PURE__*/_jsx("div",{style:{...styles.feedback,fontFamily:fontName,fontSize:`${fontSize-4}px`},children:message})]});}const styles={container:{width:"100%",height:"100%",background:"#000",color:"#00CE7D",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",padding:10,boxSizing:"border-box",overflow:"hidden",transition:"opacity 0.1s"},row:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",gap:"8px"},heading:{textShadow:"0 0 3px rgba(0, 206, 125, 0.7)",flexShrink:0},emailInput:{background:"#111",border:"1px solid #00CE7D",color:"#00CE7D",padding:"4px 6px",outline:"none",flexGrow:1,minWidth:0},subscribeButton:{background:"#111",border:"1px solid #00CE7D",color:"#00CE7D",padding:"4px 12px",cursor:"pointer",flexShrink:0},feedback:{marginTop:8,textShadow:"0 0 3px rgba(0, 206, 125, 0.7)"}};// Framer Property Controls
addPropertyControls(HorizontalNoBorderSubscription,{heading:{type:ControlType.String,title:"Heading",defaultValue:"Email:"},placeholder:{type:ControlType.String,title:"Placeholder",defaultValue:"Enter your email..."},flickerEnabled:{type:ControlType.Boolean,title:"Flicker?",defaultValue:false},fontName:{type:ControlType.String,title:"Font Name",defaultValue:"monospace"},fontSize:{type:ControlType.Number,title:"Font Size",defaultValue:16,min:10,max:80,step:1},// Instead of emailOctopus credentials, we have scriptUrl for the Apps Script
scriptUrl:{type:ControlType.String,title:"GAS Script URL",defaultValue:""}});
export const __FramerMetadata__ = {"exports":{"HorizontalNoBorderSubscription":{"type":"reactComponent","name":"HorizontalNoBorderSubscription","slots":[],"annotations":{"framerContractVersion":"1"}},"__FramerMetadata__":{"type":"variable"}}}
//# sourceMappingURL=./Subscribe_2.map